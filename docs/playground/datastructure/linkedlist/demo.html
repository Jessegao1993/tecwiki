<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>demo</title>
</head>
<body>
<script>
  class Node{
    constructor(val){
        this.val = val
        this.next = null
    }
  }

  class Llist{
    constructor(){
        this.head = null
        this.tail = null
        this.length = 0
    }
    get(index){
        if (index<0||index>=this.length) {
            return null
        }
        let current = this.head
        let i = 0
        while (i !== index) {
            current = current.next
            i++
        }
        return current
    }
    set(index,val){
        let current = this.get(index)
        if(current){
            current.val = val
            return true
        }
        return false
    }
    push(val){
        let newNode = new Node(val)
        if (!this.head) {
            this.head = newNode
            this .tail = this.head
        }
        this.tail.next = newNode
        this.tail = newNode
        this.length++
        return this
    }
    unshift(val){
        let newNode = new Node(val)
        if (!this.head) {
            this.head = newNode
            this.tail = this.head
        }
        newNode.next = this.head
        this.head = newNode
        this.length++
    }
    pop(){
        if (!this.head) {
            return false
        }
        let current = this.head
        let newTail
        while (current.next) {
            newTail = current
            current = current.next
        }
        this.tail = newTail
        newTail.next = null
        length--
        if (this.length==0) {
            this.head = null
            this.tail = null
        }
        return current
    }
    shift(){
        if (!this.head) {
            return false
        }
        let current = this.head
        this.head = current.next
        length--
        if (this.length==0) {
            this.tail = null
            this.head = null
        }
        return current
    }
    insert(index,val){
        if (index<0||index>this.length) {
            return false
        }
        if (index==0) {
            return this.unshift(val)
        }
        if (index==this.length) {
            return this.push(val)
        }

        let newNode = new Node(val)
        let prev = this.get(index-1)
        let current = prev.next
        prev.next = newNode
        newNode.next = current
        this.length++
    }
    delete(index){
        if (index<0||index>=this.length) {
            return false
        }
        if (index==0) {
            return this.shift()
        }
        if (index==this.length-1) {
            return this.pop()
        }

        let prev = this.get(index-1)
        let deleted = prev.next
        prev.next = deleted.next
        this.length--
    }
    reverse(){
        let node = this.head
        this.head = this.tail
        this.tail = node

        let next
        let prev = null
        for (let index = 0; index < this.length; index++) {
           next = node.next
           node.next = prev
           prev = node
           node = next
        }
    }
    show(){
        let res = ''
        for (let index = 0; index < this.length; index++) {
            res += this.get(index).val + '->'
        }
        return res
    }
  }



    
   let llist = new Llist()
   llist.push(1)
   llist.push(2)
   llist.push(3)
   llist.push(4)
 
 
  console.log(llist.show())
   llist.set(0,100)
   console.log(llist.show())
   llist.reverse()
   console.log(llist.show())
</script>
</body>
</html>